<div class="cart-container container mt-5">

  <h2 class="text-center mb-4">
    ðŸ›’ {{ 'Your Shopping Cart' | translate }}
  </h2>

  @if( filteredProducts().length > 0 ) {
      <div class="row g-4">

        @for( item of filteredProducts(); track $index ) {
          <div class="col-lg-4 col-md-6">
            <div class="cart-card shadow-sm">

              <div class="cart-img">
                <img [src]="item.thumbnail || item.images?.[0]"
                      alt="{{ item.title | translate }}"
                      class="img-fluid"
                />
              </div>

              <div class="cart-body">
                <h5 class="cart-title text-dark">
                  {{ item.title | translate }}
                </h5>
                <p class="cart-price">
                  {{ '$' | translate }}{{ item.price | number : '1.2-2' }}
                </p>

                <!-- Quantity Control -->
                <div class="cart-quantity">
                  <button class="btn-qty text-dark"
                          (click)="updateQuantity(item.id, item.quantity - 1)"
                  >-
                  </button>
                  <span class="text-dark">{{ item.quantity }}</span>
                  <button class="btn-qty text-dark"
                          (click)="updateQuantity(item.id, item.quantity + 1)"
                  >+
                  </button>
                </div>

                <p class="cart-subtotal text-dark">
                  {{ 'Subtotal' | translate }}:
                  <strong>
                    {{ '$' | translate }}{{ (item.price * item.quantity) | number : '1.2-2' }}
                  </strong>
                </p>

                <!-- Remove Button -->
                <button class="btn-remove"
                        (click)="removeFromCart(item.id)"
                >
                  ðŸ—‘ {{ 'Remove' | translate }}
                </button>
              </div>
            </div>
          </div>
        }

      </div>

      <!-- Total + Checkout -->
      <div class="cart-summary text-center mt-5">
        <h4>{{ 'Total' | translate }}:
          <span>
            {{ '$' | translate }}{{ totalPrice() | number : '1.2-2' }}
          </span>
        </h4>
        <a [routerLink]="['/checkout']"
            class="btn btn-success btn-lg mt-3"
        >
          {{ 'Proceed to Checkout' | translate }}
        </a>
      </div>

  } @else {

    <div class="empty-cart text-center">
      <p>
        {{ 'Your cart is empty' | translate }} ðŸ˜¢
      </p>
      <a [routerLink]="['/']"
          class="btn btn-outline-primary mt-3"
      >
        {{ 'Back to Home' | translate }}
      </a>
    </div>

    <!-- toasts -->
    <app-alert-toasts #alertToast></app-alert-toasts>

  }

</div>



<!-- toasts -->
<app-delete-toasts #deleteToast></app-delete-toasts>
