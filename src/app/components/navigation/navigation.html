<!-- navbar -->
<nav class="navbar navbar-expand-lg main-navbar"
    [ngClass]="isDarkMode() ? 'navbar-dark bg-dark' : 'navbar-light bg-light'"
>
  <div class="container">

    <!-- Logo -->
    <a class="navbar-brand fw-bold"
      [routerLink]="['/']"
      [routerLinkActive]="['active']"
      [routerLinkActiveOptions]="{ exact: true }"
    >
      TK<span class="text-primary">Shop</span>
    </a>


    <!-- Burger Menu -->
    <button class="navbar-toggler"
            type="button"
            (click)="toggleMenu()"
            title="{{ 'Menu' | translate }}"
    >
      <span class="navbar-toggler-icon"></span>
    </button>


    <!-- Menu Items -->
    <div #navbarCollapse
      class="collapse navbar-collapse mobile-slide"
      [ngClass]="{ 'show': isMenuOpen() }"
    >
      <ul class="navbar-nav mx-auto">
        <li class="nav-item">
          <a class="nav-link"
            [routerLink]="['/home']"
            [routerLinkActive]="['active']"
            [routerLinkActiveOptions]="{ exact: true }"
            (click)="closeMenu()"
          >
            {{ 'home' | translate }}
          </a>
        </li>

        <li class="nav-item">
          <a class="nav-link"
            [routerLink]="['/shop']"
            [routerLinkActive]="['active']"
            [routerLinkActiveOptions]="{ exact: true }"
            (click)="closeMenu()"
          >
            {{ 'Shop' | translate }}
          </a>
        </li>

        <li class="nav-item">
          <a class="nav-link"
            [routerLink]="['/categories']"
            [routerLinkActive]="['active']"
            [routerLinkActiveOptions]="{ exact: true }"
            (click)="closeMenu()"
          >
            {{ 'Categories' | translate }}
          </a>
        </li>

        <li class="nav-item">
          <a class="nav-link"
            [routerLink]="['/contact']"
            [routerLinkActive]="['active']"
            [routerLinkActiveOptions]="{ exact: true }"
            (click)="closeMenu()"
          >
            {{ 'contact' | translate }}
          </a>
        </li>

        <li class="nav-item">
          <a class="nav-link"
            [routerLink]="['/admin']"
            [routerLinkActive]="['active']"
            [routerLinkActiveOptions]="{ exact: true }"
            (click)="closeMenu()"
          >
            {{ 'Admin' | translate }}
          </a>
        </li>
      </ul>



      <!-- Right Side Actions -->
      <div class="d-flex align-items-center navbar-actions flex-wrap gap-2">

        <!-- first line -->
        <div class="rightSide-first-line">

          <!-- Cart -->
          <a [routerLink]="['/cart']"
            class="btn btn-outline-primary position-relative cart-btn"
            (click)="closeMenu()"
          >
            ðŸ›’
            @if( cartItemCount() > 0 ) {
              <span class="cart-badge">
                {{ cartItemCount() }}
              </span>
            }
          </a>



          <!-- Auth Links -->
          <div class="auth-links d-flex align-items-center">
            @if( !isLoggedIn() ) {

              <ng-container>
                <a class="text-decoration-none me-2 login"
                  [routerLink]="['/auth/login']"
                  [routerLinkActive]="['active']"
                  [routerLinkActiveOptions]="{ exact: true }"
                  (click)="closeMenu()"
                  >{{ 'LogIn' | translate }}
                </a>

                <span>|</span>

                <a class="text-decoration-none ms-2 register"
                  [routerLink]="['/auth/register']"
                  [routerLinkActive]="['active']"
                  [routerLinkActiveOptions]="{ exact: true }"
                  (click)="closeMenu()"
                >
                  {{ 'SignUp' | translate}}
                </a>
              </ng-container>

            } @else {

              <a [routerLink]="['/auth/profile']"
                class="text-decoration-none me-2 btn btn-primary text-light"
              >
                {{ 'Profile' | translate }}
              </a>

              <span>|</span>

              <a [routerLink]="['/']"
                class="text-decoration-none ms-2 btn btn-danger text-light"
                (click)="logout()"
              >
                {{ 'Logout' | translate }}
              </a>

            }
          </div>


          <!-- Theme Toggle -->
          <button type="button"
            class="btn btn-outline-secondary theme-btn"
            (click)="toggleTheme()"
          >
            {{ isDarkMode() ? sun() : moon() }}
          </button>


          <!-- language selector -->
          <ul class="text-decoration-none list-unstyled m-0">
            <li class="language-switcher">
              <select [ngModel]="selectedLanguage()"
                      (ngModelChange)="changeLanguage($event)"
                      title="language"
              >
                @for( lang of languages; track $index ) {
                  <option [value]="lang.code"
                          (change)="closeMenu()"
                  >
                    {{ lang.code | translate }}
                  </option>
                }
              </select>
            </li>
          </ul>
        </div>


        <!-- second line -->
        <div class="rightSide-second-line">
          <!-- Search -->
          @if( currentUrl() !== '/shop' &&
              currentUrl() !== '/contact' &&
              currentUrl() !== '/checkout'
          ) {
            <div class="search-box">
              <input type="text"
                id="search"
                name="search"
                class="form-control"
                placeholder="{{ 'Search...' | translate }}"
                (input)="onSearch($event)"
              >
            </div>
          }


          <!-- Filter -->
          @if( currentUrl() !== '/contact' &&
              currentUrl() !== '/checkout'
          ) {
            <select class="form-select sortPriceSelect"
                    name="select"
                    (change)="sortByPrice($any($event.target).value)"
            >
              <option value="">{{ 'Price' | translate}}</option>
              <option value="low">{{ 'Low â†’ High' | translate }}</option>
              <option value="high">{{ 'High â†’ Low' | translate }}</option>
            </select>
          }
        </div>

      </div>

    </div>

  </div>
</nav>