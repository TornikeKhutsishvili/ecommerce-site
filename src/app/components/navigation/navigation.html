<!-- navbar -->
<nav class="navbar navbar-expand-lg main-navbar"
  [ngClass]="isDarkMode() ? 'navbar-dark bg-dark' : 'navbar-light bg-light'"
>

  <div class="container">

    <!-- Logo -->
    <a class="navbar-brand fw-bold"
      [routerLink]="['/']"
      [routerLinkActive]="['active']"
      [routerLinkActiveOptions]="{ exact: true }"
    >
      TK<span class="text-primary">Shop</span>
    </a>


    <!-- Burger Menu -->
    <button class="navbar-toggler"
            type="button"
            (click)="toggleMenu()"
            title="{{ 'Menu' | translate }}"
    >
      <span class="navbar-toggler-icon"></span>
    </button>


    <!-- Menu Items -->
    <div #navbarCollapse
      class="collapse navbar-collapse mobile-slide"
      [ngClass]="{ 'show': isMenuOpen() }"
    >
      <ul class="navbar-nav mx-auto">
        <li class="nav-item">
          <a class="nav-link"
            [routerLink]="['/home']"
            [routerLinkActive]="['active']"
            [routerLinkActiveOptions]="{ exact: true }"
            (click)="closeMenu()"
          >
            {{ 'home' | translate }}
          </a>
        </li>

        <li class="nav-item">
          <a class="nav-link"
            [routerLink]="['/shop']"
            [routerLinkActive]="['active']"
            [routerLinkActiveOptions]="{ exact: true }"
            (click)="closeMenu()"
          >
            {{ 'Shop' | translate }}
          </a>
        </li>

        <li class="nav-item">
          <a class="nav-link"
            [routerLink]="['/contact']"
            [routerLinkActive]="['active']"
            [routerLinkActiveOptions]="{ exact: true }"
            (click)="closeMenu()"
          >
            {{ 'contact' | translate }}
          </a>
        </li>
      </ul>


      <!-- Right Side Actions -->
      <div class="d-flex align-items-center navbar-actions flex-wrap gap-2">

        <!-- Cart -->
        <a [routerLink]="['/cart']" class="btn btn-outline-primary position-relative cart-btn">
          ðŸ›’
          <span class="cart-badge" *ngIf="cartItemCount() > 0">
            {{ cartItemCount() }}
          </span>
        </a>


        <!-- Search -->
        <div class="search-box"
          *ngIf="currentUrl() !== '/shop' && currentUrl() !== '/contact'"
        >
          <input type="text"
            class="form-control"
            placeholder="{{ 'Search...' | translate }}"
            (input)="onSearch($event)"
          >
        </div>


        <!-- Auth Links -->
        <div class="auth-links d-flex align-items-center">
          <ng-container *ngIf="!isLoggedIn(); else loggedInLinks">
            <a [routerLink]="['/login']"
              class="text-decoration-none me-2"
              >{{ 'Login' | translate }}
            </a>

            <span>|</span>

            <a [routerLink]="['/register']"
              class="text-decoration-none ms-2"
            >
              {{ 'Register' | translate}}
            </a>
          </ng-container>


          <ng-template #loggedInLinks>
            <a [routerLink]="['/profile']"
              class="text-decoration-none me-2 btn btn-primary text-light"
            >
              {{ 'Profile' | translate }}
            </a>

            <span>|</span>

            <a [routerLink]="['/']"
              class="text-decoration-none ms-2 btn btn-danger text-light"
              (click)="logout()"
            >
              {{ 'Logout' | translate }}
            </a>
          </ng-template>
        </div>



        <!-- Theme Toggle -->
        <button type="button"
          class="btn btn-outline-secondary theme-btn"
          (click)="toggleTheme()"
        >
          {{ isDarkMode() ? sun : moon }}
        </button>



        <!-- language selector -->
        <ul class="text-decoration-none list-unstyled m-0">
          <li class="language-switcher">
            <select [(ngModel)]="selectedLanguage"
              (ngModelChange)="changeLanguage($event)"
              title="language"
            >
              <option *ngFor="let lang of languages"
                [value]="lang.code"
                (change)="closeMenu()"
              >
                {{ lang.code | translate }}
              </option>
            </select>
          </li>
        </ul>



        <!-- Filter -->
        <select *ngIf="currentUrl() !== '/contact'"
          class="form-select" name="select"
          (change)="filterByPrice($event, products())"
        >
          <option value="">{{ 'Price' | translate}}</option>
          <option value="low">{{ 'Low â†’ High' | translate }}</option>
          <option value="high">{{ 'High â†’ Low' | translate }}</option>
        </select>

      </div>

    </div>

  </div>
</nav>