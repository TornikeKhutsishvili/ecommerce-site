<!-- top -->

<hr>

<section class="toolbar d-flex justify-content-center">

  <!-- navbar -->
  <nav class="nav navbar navbar-expand-lg main-navbar">
    <ul class="nav-list navbar-nav mx-auto">

      <li class="nav-item">
        <a class="nav-link"
          [routerLink]="['/admin/dashboard']"
          [routerLinkActive]="['active']"
          [routerLinkActiveOptions]="{ exact: true }"
        >
          üè† {{ 'Dashboard' | translate }}
        </a>
      </li>

      <li class="nav-item">
        <a class="nav-link"
          [routerLink]="['/admin/users']"
          [routerLinkActive]="['active']"
          [routerLinkActiveOptions]="{ exact: true }"
        >
          üë• {{ 'All Users' | translate }}
        </a>
      </li>

      <li class="nav-item">
        <a class="nav-link"
          [routerLink]="['/admin/orders']"
          [routerLinkActive]="['active']"
          [routerLinkActiveOptions]="{ exact: true }"
        >
          üìÑ {{ 'All Orders' | translate }}
        </a>
      </li>

      <li class="nav-item">
        <a class="nav-link"
          [routerLink]="['/admin/dashboard-analytics']"
          [routerLinkActive]="['active']"
          [routerLinkActiveOptions]="{ exact: true }"
        >
          üìä {{ 'Analytics' | translate }}
        </a>
      </li>

    </ul>
  </nav>

</section>

<hr>



<!-- content -->

<section class="container my-4">
  <h2 class="mb-4">
    <i class="fa fa-receipt me-2"></i>
    {{ 'All Orders' | translate }}
  </h2>

  @if(loading){
    <div class="alert alert-info">
      {{ 'Loading orders...' | translate }}
    </div>
  }

  @if(!loading && orders.length === 0){
    <div class="alert alert-warning">
      {{ 'No orders found' | translate }}
    </div>
  }

  @if(!loading && orders.length > 0){
    <div class="table-responsive">
      <table class="table table-striped table-hover align-middle shadow-sm">

        <thead class="table-dark">
          <tr>
            <th>#</th>
            <th>{{ 'Order ID' | translate }}</th>
            <th>{{ 'User ID' | translate }}</th>
            <th>{{ 'Total Price' | translate }}</th>
            <th>{{ 'Status' | translate }}</th>
            <th>{{ 'Created At' | translate }}</th>
            <th>{{ 'Actions' | translate }}</th>
          </tr>
        </thead>

        <tbody>
          @for(order of orders; track $index){
            <tr>
              <td>{{ $index + 1 }}</td>
              <td>{{ order.id }}</td>
              <td>{{ order.userId }}</td>
              <td>{{ order.total | currency:'USD' }}</td>
              <td>
                @if(order.status === STATUS.COMPLETED){
                  <span class="badge bg-success">Completed</span>
                }

                @if(order.status === STATUS.PENDING){
                  <span class="badge bg-warning text-dark">Pending</span>
                }

                @if(order.status === STATUS.PROCESSING){
                  <span class="badge bg-info">Processing</span>
                }

                @if(order.status === STATUS.CANCELLED){
                  <span class="badge bg-danger">Cancelled</span>
                }
              </td>
              <td>{{ order.createdAt | date:'short' }}</td>
              <td>
                <button class="btn btn-sm btn-outline-primary me-2"
                        (click)="updateStatus(order.id, STATUS.COMPLETED)">
                  <i class="fa fa-check"></i>
                </button>

                <button class="btn btn-sm btn-outline-warning me-2"
                        (click)="updateStatus(order.id, STATUS.PROCESSING)">
                  <i class="fa fa-cog"></i>
                </button>

                <button class="btn btn-sm btn-outline-danger"
                        (click)="cancelOrder(order.id)">
                  <i class="fa fa-times"></i>
                </button>
              </td>
            </tr>
          }
        </tbody>

      </table>
    </div>
  }
</section>
